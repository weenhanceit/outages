<h3>Change Password</h3>

<%= bootstrap_form_with(model: resource,
      as: resource_name,
      url: registration_path(resource_name),
      html: { method: :put },
      local: true) do |f| %>
  <%= devise_error_messages! %>

  <div class="field">
    <%#= f.label :email %><br />
    <%= f.email_field :email, autofocus: true %>
  </div>

  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
  <% end %>

  <div class="field">
    <%= f.password_field :password,
          label: password_label("Password <i>(leave blank if you don't want to change it)</i>".html_safe),
          autocomplete: "off", id: :user_password %>
  </div>

  <div class="field">
    <%= f.password_field :password_confirmation,
          autocomplete: "off",
          id: :user_password_confirmation,
          label_class: "required" %>
  </div>

  <div class="field">
    <%= f.password_field :current_password,
          autocomplete: "off",
          id: :user_current_password,
          label: "Current password <i>(we need your current password to confirm your changes)</i>".html_safe %>
  </div><br />

  <div class="actions">
    <%= f.primary "Update", class: "btn btn-primary btn-block" %><br/>
  </div>
<% end %>

<h3>Cancel My Account</h3>

<p>
  <%= button_to "Cancel my account",
        registration_path(resource_name),
        data: { confirm: "Are you sure?" },
        method: :delete,
        class: "btn btn-secondary btn-block" %></p>

<%= link_to "Back", :back, class: "btn btn-secondary btn-block" %>
